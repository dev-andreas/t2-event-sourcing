apply plugin: 'application'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'java'

java {
    sourceCompatibility = JavaVersion.VERSION_21
}

version = '1.0'

ext {
    mainClassName = "org.pgi.paxoscoin.Main"
}

application {
    mainClassName = 'org.pgi.paxoscoin.Main'
}


repositories {
    mavenCentral()
}

dependencies {
}

task gitAdd(type: Exec) {
    commandLine "git", "add", "--all"
}

task gitDiff(type: Exec) {
  doFirst {
    standardOutput = new FileOutputStream('submission_files/changes.diff')
  }

  commandLine "git", "diff", "v1.0"
}

task prepareSubmission(type: Zip) {
  from 'submission_files'
  archiveBaseName = 'ex2_submission'
  archiveVersion = null
  destinationDirectory = file('.')
}

gitDiff.dependsOn gitAdd
gitDiff.dependsOn build
prepareSubmission.dependsOn gitDiff
